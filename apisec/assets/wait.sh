#!/bin/bash

show_progress()
{
  echo "CyberSecuriti.ai" 
  sleep 3
  echo "API Security Platform/" 
  sleep 3
  echo "The leading API security platform that instantly detects top security exploits stemming from business-logic, role-misconfiguration, & injection flaws that target the API layer." 
  sleep 3
  echo "Starting CLI Demo" 
  sleep 3
   echo "API: Sample NetBanking API" 
  sleep 3
   echo "API Doc: http://104.42.41.159/swagger-ui.html" 
  sleep 3
   echo "API OAS: http://104.42.41.159/v2/api-docs" 
  sleep 3
  echo -e  "\e[1;43m Skipped: Auto Discovery from API Gateways (Apigee & 4+)..." 
  sleep 4
  echo "Discovering API endpoints..." 
  sleep 3
  echo "APISec Bot Writing Custom Assessments (Security-as-Code)..."
  sleep 3
  echo "Total Assessments Written: 75"
  sleep 3
  echo -e "\e[1;43m Skipped: Enabling DevSecOps (Jira & 7+)..."
  sleep 3
  echo "Running Broken Authentication (OWASP API2) category..."
  sleep 3
  echo -e "\e[1;31m Vulnerabilities detected"
  sleep 3
  echo -e  "\e[1;31mGET:http://104.42.41.159/api/v1/primary-transaction/nMBRqCPE"
  sleep 1
  echo -e  "\e[1;31m POST:http://104.42.41.159/api/v1/users/personal-sign-up"
  sleep 1
  echo -e  "\e[1;31m POST:http://104.42.41.159/api/v1/users/enterprise-sign-up"
  sleep 1
  echo -e  "\e[1;31m POST:http://104.42.41.159/api/v1/users/team-sign-up"
  sleep 1
  echo -e  "\e[1;31m PUT:http://104.42.41.159/api/v1/primary-transaction"
  sleep 1
  echo -e  "\e[1;43m Skipped: Automatic Vulnerability Lifecycle Management (open/close) in (Jira & 5+).."
  sleep 1
  echo -e  "\e[1;42m API security scan completed successfully."
  sleep 2

  # local -r pid="${1}"
  # local -r delay='0.75'
  # local spinstr='\|/-'
  # local temp
  #while true; do 
  # #  sudo grep -i "done" /root/katacoda-finished &> /dev/null
  #   if [[ "$?" -ne 0 ]]; then     
  #     temp="${spinstr#?}"
  #     printf " [%c]  " "${spinstr}"
  #     spinstr=${temp}${spinstr%"${temp}"}
  #     sleep "${delay}"
  #     printf "\b\b\b\b\b\b"
  #   else
  #     break
  #   fi
  # done
  # printf "    \b\b\b\b"
  # echo ""
  # echo "Started"
  # echo -n "Configuring"
  # while true; do 
  #   sudo grep -i "done" /root/katacoda-background-finished &> /dev/null
  #   if [[ "$?" -ne 0 ]]; then     
  #     temp="${spinstr#?}"
  #     printf " [%c]  " "${spinstr}"
  #     spinstr=${temp}${spinstr%"${temp}"}
  #     sleep "${delay}"
  #     printf "\b\b\b\b\b\b"
  #   else
  #     break
  #   fi
  # done
  # printf "    \b\b\b\b"
  # echo ""
  # echo "Configured"
}

show_progress