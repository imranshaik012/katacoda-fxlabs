#!/bin/bash

show_progress()
{
  echo "CyberSecuriti.ai" 
  sleep 3
  echo "API Security Platform" 
  sleep 3
  echo "The leading API security platform that instantly detects top security exploits stemming from business-logic, role-misconfiguration, & injection flaws that target the API layer." 
  sleep 3
  echo "http://104.42.41.159/swagger-ui.html " 
  sleep 3
  echo "Parsing OpenAPI Spec" 
  sleep 4
  echo "Activating Broken Auth category" \
  sleep 3
  echo "Total endpoints discovered : 75"
  sleep 3
  echo "Total Assessments written by bot : 75"\
  sleep 3
  echo "Running Broken Auth category"
  sleep 3
  echo -e "\e[1;31m 7 vulnerablility endpoints detected\e[0m"
  sleep 4
  echo "Exploitable endpoints:"
  echo "GET:http://104.42.41.159/api/v1/primary-transaction/nMBRqCPE"
  sleep 1
  echo "POST:http://104.42.41.159/api/v1/users/personal-sign-up"
  sleep 1
  echo "POST:http://104.42.41.159/api/v1/users/enterprise-sign-up"
  sleep 1
  echo "POST:http://104.42.41.159/api/v1/users/team-sign-up"
  sleep 1
  echo "PUT:http://104.42.41.159/api/v1/primary-transaction"
  sleep 1
  echo "End of Scan"
  sleep 2

  # local -r pid="${1}"
  # local -r delay='0.75'
  # local spinstr='\|/-'
  # local temp
  #while true; do 
  # #  sudo grep -i "done" /root/katacoda-finished &> /dev/null
  #   if [[ "$?" -ne 0 ]]; then     
  #     temp="${spinstr#?}"
  #     printf " [%c]  " "${spinstr}"
  #     spinstr=${temp}${spinstr%"${temp}"}
  #     sleep "${delay}"
  #     printf "\b\b\b\b\b\b"
  #   else
  #     break
  #   fi
  # done
  # printf "    \b\b\b\b"
  # echo ""
  # echo "Started"
  # echo -n "Configuring"
  # while true; do 
  #   sudo grep -i "done" /root/katacoda-background-finished &> /dev/null
  #   if [[ "$?" -ne 0 ]]; then     
  #     temp="${spinstr#?}"
  #     printf " [%c]  " "${spinstr}"
  #     spinstr=${temp}${spinstr%"${temp}"}
  #     sleep "${delay}"
  #     printf "\b\b\b\b\b\b"
  #   else
  #     break
  #   fi
  # done
  # printf "    \b\b\b\b"
  # echo ""
  # echo "Configured"
}

show_progress